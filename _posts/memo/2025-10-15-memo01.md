---
layout: post
title: ì¿ í‚¤ ì „ì†¡- server api, client api
category: memo
tags: [memo]
comments: true
---

<!-- @format -->

> ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œì˜€ëŠ”ë°ë„, ì¿ í‚¤ ê´€ë ¨ ê°œë…ì„ ìê¾¸ í—·ê°ˆë ¤ì„œ ì •ë¦¬í•¨.

íšŒì‚¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ fetchë¥¼ server í™˜ê²½ê³¼ client í™˜ê²½ì— ë§ê²Œ ë¶„ë¦¬í•´ì¤¬ì—ˆë‹¤.<br/>
ì´ë ‡ê²Œ ë‚˜ëˆˆ ê°€ì¥ í° ì´ìœ ëŠ” ë°”ë¡œ ì¿ í‚¤(Cookie) ë•Œë¬¸ì´ì—ˆë‹¤.

---

## í•µì‹¬ ê°œë…

### Client API (ë¸Œë¼ìš°ì € í™˜ê²½)

ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì¿ í‚¤ê°€ ìë™ìœ¼ë¡œ í¬í•¨ëœë‹¤.<br/>
ì¦‰, axiosë‚˜ fetch ìš”ì²­ ì‹œ `withCredentials: true` ì˜µì…˜ë§Œ ì£¼ë©´ ë¸Œë¼ìš°ì €ê°€ ì•Œì•„ì„œ ì¿ í‚¤ë¥¼ ì²¨ë¶€í•œë‹¤.<br/>
í—¤ë”ì— ì§ì ‘ ì¿ í‚¤ë¥¼ ë„£ì„ í•„ìš”ê°€ ì—†ë‹¤.

### Server API (Node.js í™˜ê²½)

ë°˜ë©´, ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ(Next.js server actions, getServerSideProps, route handlers ë“±)ëŠ”
ë¸Œë¼ìš°ì € í™˜ê²½ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì¿ í‚¤ë¥¼ ìë™ìœ¼ë¡œ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.<br/>
ë”°ë¼ì„œ ì§ì ‘ ì¿ í‚¤ë¥¼ ì½ì–´ì„œ í—¤ë”ì— ì‹¤ì–´ì¤˜ì•¼ í•œë‹¤.

---

## Server API ì˜ˆì‹œ

```js
import { cookies } from 'next/headers';
import axios from 'axios';

export async function serverApi(endpoint) {
  const cookieStore = cookies();

  const res = await axios.get(
    `${process.env.NEXT_PUBLIC_BACKEND_URL}${endpoint}`,
    {
      headers: {
        Cookie: cookieStore.toString(), // ğŸª ì§ì ‘ ì¿ í‚¤ ì „ë‹¬
      },
    }
  );

  return res.data;
}
```

## Client API ì˜ˆì‹œ

```js
import axios from 'axios';

axios.get('/api/current-user', {
  withCredentials: true, // âœ… ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì¿ í‚¤ë¥¼ ì²¨ë¶€
});
```
